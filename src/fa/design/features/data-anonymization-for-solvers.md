# ناشناس‌سازی داده برای Solverها

## وضعیت

پیشنهادی

## انگیزه

برخی مؤسسات (مانند دانشگاه‌ها و آکادمی‌ها) تمایلی ندارند یا امکان آن را ندارند که داده‌های عملیاتی واقعی خود
(مدرسان، فراگیران، امکانات، موقعیت‌ها، محدودیت‌های داخلی) را در اختیار سرویس‌های Solver خارجی قرار دهند.

در عین حال، DiTA به‌طور بنیادین متکی بر Solverهای شخص ثالث یا توزیع‌شده برای پردازش مسائل زمان‌بندی است.
این موضوع یک تنش مستقیم میان موارد زیر ایجاد می‌کند:
- حریم خصوصی و محرمانگی داده‌ها،
- اثربخشی و صحت عملکرد Solverها.

این فیچر یک **سیستم ناشناس‌سازی داده** معرفی می‌کند که امکان مشارکت Solverها را
بدون افشای داده‌های واقعی یا حساس مؤسسات فراهم می‌سازد،
در حالی که تضمین‌های مربوط به صحت نتایج حفظ می‌شود
یا در صورت لزوم، انحراف‌ها به‌صورت شفاف اعلام می‌گردند.

---

## بیان مسئله

ما به مکانیزمی نیاز داریم که:
- از دسترسی Solverها به داده‌های واقعی مؤسسات جلوگیری کند،
- به Solverها اجازه دهد روی پکت‌های ناشناس‌سازی‌شده یا تبدیل‌شده کار کنند،
- تضمین کند که راه‌حل تولیدشده یا:
    - معادل راه‌حلی است که با داده‌های واقعی به‌دست می‌آمده، یا
    - به‌صورت صریح به‌عنوان راه‌حلی با امکان انحراف مشخص شده و دلایل آن اعلام گردد.

این مکانیزم باید انعطاف‌پذیر، قابل اتصال (pluggable) و تحت کنترل مؤسسه باشد.

---

## الزامات اصلی

### R1. تبدیل پکت (Packet Transformation)

سیستم **باید** قادر باشد:
- داده‌های داخل پکت را تغییر دهد،
- و در صورت نیاز، **ساختار خود پکت** را نیز تغییر دهد،
  به‌گونه‌ای که امکان استنتاج یا بازسازی داده‌های واقعی وجود نداشته باشد.

این موارد شامل (اما محدود به) موارد زیر است:
- جایگزینی شناسه‌ها،
- انتزاع موجودیت‌ها،
- حذف یا تعمیم ویژگی‌های حساس،
- بازساخت‌دهی ارجاعات به منابع خارجی.

---

### R2. تضمین هم‌ارزی نتیجه

برای هر پکت ناشناس‌سازی‌شده:
- راه‌حل حاصل از پردازش داده‌های ناشناس **باید**:
    - معادل راه‌حلی باشد که با داده‌های واقعی تولید می‌شد، **یا**
    - همراه با یک اعلان صریح از اختلافات و علل آن ارائه گردد.

بنابراین لایه ناشناس‌سازی **باید**:
- تأثیر معنایی تبدیل‌ها را درک کند، یا
- عدم قطعیت را به‌صورت شفاف و قابل فهم آشکار سازد.

---

### R3. رهگیری دسترسی به منابع

سیستم ناشناس‌سازی **می‌تواند** ارجاعات به منابع را در داخل پکت تغییر دهد.

#### مثال مسئله

ممکن است پکت شامل عبارتی مانند زیر باشد:
> «از مدرسان دانشگاه من استفاده کن»

در صورت ارسال مستقیم:
- Solver ممکن است به منبع واقعی دانشگاه درخواست ارسال کند،
- که منجر به نشت داده‌های حساس می‌شود.

#### رفتار موردنیاز

سیستم ناشناس‌سازی **باید** این وضعیت را با یکی از راهبردهای زیر مدیریت کند:

1. **پیش‌دریافت و تعبیه (Pre-fetch and Embed)**
    - داده‌های واقعی را از منبع مؤسسه دریافت کند،
    - آن‌ها را ناشناس‌سازی کند،
    - و مجموعه‌داده ناشناس را مستقیماً داخل پکت تعبیه نماید.

2. **بازهدایت منبع از طریق پراکسی (Proxy Resource Redirection)**
    - آدرس منبع اصلی را در پکت جایگزین کند،
    - آن را به یک Worker یا پراکسی سازگار با ناشناس‌سازی هدایت کند.
    - این Worker:
        - داده‌های واقعی را دریافت می‌کند،
        - مطابق قوانین تعریف‌شده آن‌ها را ناشناس‌سازی می‌کند،
        - و پاسخ‌های ناشناس را در اختیار Solver قرار می‌دهد.

در هر دو حالت:
- Solver **نباید** هرگز به‌طور مستقیم به Endpointهای واقعی مؤسسه دسترسی داشته باشد.

---

### R4. سیستم‌های ناشناس‌سازی قابل اتصال

DiTA **باید** از چندین سیستم ناشناس‌سازی پشتیبانی کند.

هر سیستم ناشناس‌سازی:
- می‌تواند قوانین خاص خود را تعریف کند،
- می‌تواند راهبردهای متفاوتی برای تبدیل داده‌ها پیاده‌سازی کند،
- می‌تواند توازن‌های متفاوتی میان حریم خصوصی و اثربخشی Solver ارائه دهد.

**انتخاب سیستم ناشناس‌سازی** بر عهده مؤسسه (مشتری) است،
نه پلتفرم.

---

### R5. مدیریت داده‌های دشوار برای ناشناس‌سازی

برخی انواع داده:
- به‌شدت دشوار برای ناشناس‌سازی هستند،
- یا ذاتاً بدون از بین رفتن صحت، غیرقابل ناشناس‌سازی‌اند.

نمونه اصلی آن **داده‌های مکانی (Location Data)** است.

#### قابلیت موردنیاز

سیستم ناشناس‌سازی **می‌تواند** راهبردهای محاسباتی جایگزین ارائه دهد، از جمله:
- تعبیه یک Worker محاسبه فاصله در داخل پکت،
- ارائه معیارهای مشتق‌شده (مانند زمان سفر یا ماتریس فاصله) به‌جای مختصات خام،
- یا معرفی انتزاع‌های نوآورانه‌ای که کارایی Solver را حفظ می‌کنند.

در صورتی که هیچ راهبرد امنی وجود نداشته باشد:
- سیستم ناشناس‌سازی **باید** محدودیت‌ها را به‌صورت صریح اعلام کند.

---

## اهداف خارج از دامنه (Non-Goals)

- این سند یک الگوریتم مشخص برای ناشناس‌سازی تعریف نمی‌کند.
- این سند استفاده از تکنیک‌های رمزنگاری را الزام نمی‌کند.
- این سند جزئیات پیاده‌سازی یا توپولوژی استقرار را مشخص نمی‌کند.

این موارد متعلق به تصمیمات سطح معماری (ADR) هستند.

---

## پرسش‌های باز

- ناشناس‌سازی باید در کدام نقطه اعمال شود: پیش از ساخت پکت، در سطح Gateway، یا به‌ازای هر منبع؟
- هم‌ارزی یا انحراف چگونه باید به‌صورت رسمی تعریف و راستی‌آزمایی شود؟
- چه تضمین‌هایی را می‌توان واقع‌بینانه در میان Solverهای ناهمگون اعمال کرد؟
- متادیتای ناشناس‌سازی چگونه (و آیا اصلاً) باید در اختیار Solverها قرار گیرد؟

---

## گام‌های بعدی

- ارزیابی رویکردهای معماری برای محل اعمال ناشناس‌سازی.
- تعریف مرزهای اعتماد میان پلتفرم، سیستم ناشناس‌سازی و Solver.
- ایجاد ADR برای رسمی‌سازی تصمیمات معماری استخراج‌شده از این طراحی.
