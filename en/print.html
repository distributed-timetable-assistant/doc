<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>DiTA — Distributed Timetable Assistant</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">DiTA — Distributed Timetable Assistant</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction"><strong>Introduction</strong></a></h1>
<p>The <strong>Distributed Timetable Assistant (DiTA)</strong> is a decentralized platform designed to revolutionize educational scheduling. By moving away from traditional, centralized algorithms, DiTA empowers institutions, instructors, and learners to collaboratively build optimized timetables.</p>
<p>Instead of a single bottleneck, DiTA uses a network of independent <strong>Solver Services</strong> that compete to solve scheduling problems defined by <strong>Institution Packets</strong>. This approach ensures scalability, fairness, and the ability to handle complex, real-world constraints that centralized systems often miss.</p>
<p>For a deeper dive into how DiTA works, see the <a href="overview.html">Overview</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overview"><a class="header" href="#overview"><strong>Overview</strong></a></h1>
<h2 id="the-challenge"><a class="header" href="#the-challenge">The Challenge</a></h2>
<p>Educational scheduling is inherently complex. It involves balancing the needs of multiple stakeholders—institutions, instructors, supervisors, and learners—against limited resources like classrooms and labs. Traditional centralized systems often struggle with this complexity, leading to rigid schedules that fail to accommodate individual preferences or adapt to changes.</p>
<h2 id="the-dita-solution"><a class="header" href="#the-dita-solution">The DiTA Solution</a></h2>
<p>The <strong>Distributed Timetable Assistant (DiTA)</strong> addresses these challenges through decentralization. It creates a marketplace where scheduling problems are matched with independent solvers.</p>
<h3 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h3>
<ul>
<li><strong>Institution Packets:</strong> Structured data units where organizations define their participants, courses, constraints, and resources.</li>
<li><strong>Solver Services:</strong> Independent microservices (human or automated) that propose timetable solutions.</li>
<li><strong>Marketplace:</strong> The ecosystem where packets are published and solutions are traded.</li>
</ul>
<h3 id="unique-features"><a class="header" href="#unique-features">Unique Features</a></h3>
<h4 id="1-open-ecosystem"><a class="header" href="#1-open-ecosystem">1. Open Ecosystem</a></h4>
<p>DiTA is not just for schools. It is a platform where <strong>anyone</strong> can register and manage resources.</p>
<ul>
<li><strong>Participants:</strong> Teachers, students, supervisors.</li>
<li><strong>Facilities:</strong> Schools, universities, gyms, laboratories, and more.</li>
<li><strong>Sharing:</strong> Users can share their availability or resources (e.g., a lab renting out empty slots) with the entire network.</li>
</ul>
<h4 id="2-hybrid-resource-management"><a class="header" href="#2-hybrid-resource-management">2. Hybrid Resource Management</a></h4>
<p>Institutions can define resources in a flexible, hybrid manner:</p>
<ul>
<li><strong>Dedicated:</strong> Use your own private list of teachers and rooms.</li>
<li><strong>Shared:</strong> Request resources from the public pool.</li>
<li><strong>Conditional:</strong> Define rules like <em>"If our internal math teachers are fully booked, request a certified math teacher from the platform."</em>
This applies to all resource types—instructors, classrooms, or even specific equipment.</li>
</ul>
<h4 id="3-a-hub-for-academic-research"><a class="header" href="#3-a-hub-for-academic-research">3. A Hub for Academic Research</a></h4>
<p>Educational timetabling is a vibrant field of research, with dedicated conferences like <strong>PATAT</strong> (Practice and Theory of Automated Timetabling) and international competitions (ITC).
DiTA provides a perfect real-world testbed for researchers:</p>
<ul>
<li><strong>Real Data:</strong> Researchers can test their algorithms on real-world constraints and data (anonymized if needed).</li>
<li><strong>Benchmarking:</strong> The marketplace acts as a live benchmark where new algorithms can compete against existing ones.</li>
<li><strong>Implementation:</strong> Students and academics can publish their solvers as microservices, moving their work from theoretical papers to practical application.</li>
</ul>
<h2 id="how-it-works-the-user-journey"><a class="header" href="#how-it-works-the-user-journey">How It Works (The User Journey)</a></h2>
<ol>
<li><strong>Definition:</strong> An institution defines its requirements (courses, teachers, rooms) and bundles them into an <strong>Institution Packet</strong>.</li>
<li><strong>Submission:</strong> The packet is submitted to the DiTA network.</li>
<li><strong>Discovery:</strong> Independent <strong>Solver Services</strong> discover the packet and analyze its complexity.</li>
<li><strong>Solving:</strong> Solvers generate proposed timetables, optimizing for constraints and preferences.</li>
<li><strong>Evaluation:</strong> The system scores proposals based on quality, fairness, and rule satisfaction.</li>
<li><strong>Selection:</strong> The institution selects the best solution, and the winning solver is rewarded.</li>
</ol>
<p>This process allows for iterative improvement, where schedules can be refined over time to achieve the best possible outcome for everyone involved.</p>
<p><img src="images/overview-flowchart.png" alt="Overview Flowchart" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design"><a class="header" href="#design"><strong>Design</strong></a></h1>
<p>The <strong>Distributed Timetable Assistant (DiTA)</strong> design focuses on extensibility, fairness, and reactive evaluation. It provides the abstract mechanisms that enable the marketplace described in the <a href="design/../overview.html">Overview</a>.</p>
<p><img src="design/../images/design.png" alt="Distributed Timetable Assistant Design" /></p>
<hr />
<h2 id="core-mechanisms"><a class="header" href="#core-mechanisms">Core Mechanisms</a></h2>
<h3 id="1-the-marketplace"><a class="header" href="#1-the-marketplace">1. The Marketplace</a></h3>
<p>The marketplace is the decoupling layer between Institutions (demand) and Solvers (supply). It ensures that:</p>
<ul>
<li><strong>Discovery:</strong> Solvers can find problems that match their capabilities.</li>
<li><strong>Transparency:</strong> All transactions and evaluations are verifiable.</li>
<li><strong>Competition:</strong> Multiple solvers can attempt the same problem, driving up solution quality.</li>
</ul>
<h3 id="2-reactive-evaluation--scoring"><a class="header" href="#2-reactive-evaluation--scoring">2. Reactive Evaluation &amp; Scoring</a></h3>
<p>DiTA employs a <strong>reactive</strong> scoring model. Solution scores are not static; they adjust based on the changing state of resources.</p>
<ul>
<li><strong>Dynamic Scoring:</strong> If a resource (e.g., a specific lab) becomes overbooked globally, solutions relying on it may see their scores drop in real-time.</li>
<li><strong>Fairness:</strong> The system penalizes conflicts and rewards efficient resource usage proportionally.</li>
</ul>
<h3 id="3-extensibility"><a class="header" href="#3-extensibility">3. Extensibility</a></h3>
<p>The platform is designed to evolve without breaking existing contracts:</p>
<ul>
<li><strong>Reward Models:</strong> New ways to incentivize solvers (e.g., tokens, reputation) can be plugged in.</li>
<li><strong>Gamification:</strong> Leaderboards and challenges can be added to the solver layer.</li>
<li><strong>Pluggable Validators:</strong> Institutions can add custom validation logic for their specific constraints.</li>
</ul>
<h3 id="4-flexible-processing--privacy"><a class="header" href="#4-flexible-processing--privacy">4. Flexible Processing &amp; Privacy</a></h3>
<p>The system supports various processing models to suit different privacy and security needs:</p>
<ul>
<li><strong>Self-Hosted Processing:</strong> Institutions can run their own solver services to keep data entirely within their infrastructure.</li>
<li><strong>Conditional Processing:</strong> Requests can be routed to specific solvers that meet certain criteria (e.g., "only trusted partners").</li>
<li><strong>Anonymized Processing:</strong> Data can be passed through an anonymization layer before reaching public solvers. The results are transparently de-anonymized upon return, allowing the community to solve the problem without seeing sensitive identity data.</li>
</ul>
<hr />
<h2 id="design-principles"><a class="header" href="#design-principles">Design Principles</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Principle</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>Decentralization</strong></td><td>Logic is distributed; no single central scheduler controls the outcome.</td></tr>
<tr><td><strong>Transparency</strong></td><td>Evaluation rules and rewards are clear to all participants.</td></tr>
<tr><td><strong>Reactivity</strong></td><td>The system adapts to state changes in real-time.</td></tr>
<tr><td><strong>Scalability</strong></td><td>Adding more solvers linearly increases the system's problem-solving capacity.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="institution-packet"><a class="header" href="#institution-packet">Institution Packet</a></h1>
<p>The Institution Packet defines the complete structure and data for an institution within the DITA system. It serves as the root configuration that encompasses all aspects of an institution's scheduling and resource management, including availabilities, facilities, learners, instructors, and more.</p>
<h2 id="components"><a class="header" href="#components">Components</a></h2>
<p>The Institution Packet is composed of several aggregates, each responsible for a specific domain of the institution's data:</p>
<ul>
<li><strong><a href="design/institution-packet/availabilities.html">Availabilities</a></strong>: Defines time ranges and availability status for scheduling (e.g., term dates, daily schedules, holidays).</li>
<li><strong><a href="design/institution-packet/facilities.html">Facilities</a></strong>: Physical spaces such as classrooms, labs, and conference halls.</li>
<li><strong><a href="design/institution-packet/learners.html">Learners</a></strong>: Individuals enrolled in courses.</li>
<li><strong><a href="design/institution-packet/instructors.html">Instructors</a></strong>: Individuals responsible for teaching courses.</li>
<li><strong><a href="design/institution-packet/supervisors.html">Supervisors</a></strong>: Individuals who manage facilities or other resources.</li>
<li><strong><a href="design/institution-packet/resources.html">Resources</a></strong>: Educational materials like books and equipment.</li>
<li><strong><a href="design/institution-packet/subjects.html">Subjects</a></strong>: Standard educational topics (e.g., "Physics 101").</li>
<li><strong><a href="design/institution-packet/courses.html">Courses</a></strong>: Scheduled offerings of subjects.</li>
<li><strong><a href="design/institution-packet/units.html">Units</a></strong>: Organizational units like departments or schools.</li>
</ul>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<p>Below is an example of a complete Institution Packet configuration in YAML format.</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: InstitutionPacket
name: Brisbane Central Primary School
address:
availabilities: # Availability define specific time ranges along with availability status for scheduling purposes.
  - action: Add # Add, Remove
    add-type: WeeklyPeriod # DailyPeriod, WeeklyPeriod, MonthlyPeriod, YearlyPeriod, Blocks, Block
    first-day-of-week: Monday # Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday
    time-cells:
      - action: Add # Add, Remove
        add-type: DailyPeriod
        rules: []
        time-cells:
          # Session 1: 09:00 - 10:40
          - action: Add # Add, Remove
            add-type: Block
            start: 09:00
            end: 10:40
            status: Available # Available, Unavailable, Preferred, Undesired
            rules: []
          
          # Break 1: 10:40 - 11:25 (Excluded)

          # Session 2: 11:30 - 13:00
          - action: Add # Add, Remove
            add-type: Block
            start: 11:30
            end: 13:00
            status: Available # Available, Unavailable, Preferred, Undesired
            rules: []

          # Break 2: 13:00 - 13:30 (Excluded)

          # Session 3: 13:30 - 15:00
          - action: Add # Add, Remove
            add-type: Block
            start: 13:30
            end: 15:00
            status: Available # Available, Unavailable, Preferred, Undesired
            rules: []
        start: Monday
        end: Friday
    start: 2025-01-28T00:00:00+10:00
    end: 2025-12-12T23:59:59+10:00
  - action: Remove # Add, Remove
    remove-type: Holidays
    country: "au-qld"
    start: 2025-01-28T00:00:00+10:00
    end: 2025-12-12T23:59:59+10:00
facilities: # Facilities represent physical spaces such as classrooms, labs, gyms, or conference halls that can be scheduled for use.
learners: # Learners are individuals who enroll in courses to receive training or education.
instructors: # Instructors are individuals responsible for teaching and guiding learners in one or more courses.
supervisors: # Individuals assigned to supervise or manage the facility.
resources: # Resources are educational materials such as books, videos, or documents linked to subjects.
subjects: # Subjects define standard educational topics such as “Physics 2” that can be taught across multiple courses.
courses: # Courses are scheduled offerings of a subject, typically linked to a specific instructor and academy.
units: # Organizational units such as schools, departments, or training centers, each with their own scheduling and resources.
  - name: Primary Years
    address:
    availabilities:
    facilities:
    learners:
    instructors:
    supervisors:
    resources:
    subjects:
    courses:
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="availabilities"><a class="header" href="#availabilities">Availabilities</a></h1>
<p>Availabilities define specific time ranges along with availability status for scheduling purposes. This system allows for complex scheduling rules including recurring patterns, specific date ranges, and exception handling (like holidays).</p>
<h2 id="structure"><a class="header" href="#structure">Structure</a></h2>
<p>An availability entry consists of a hierarchical structure of time definitions.</p>
<h3 id="top-level-fields"><a class="header" href="#top-level-fields">Top-Level Fields</a></h3>
<ul>
<li><strong>action</strong>: The operation to perform.
<ul>
<li><code>Add</code>: Adds availability for the specified period.</li>
<li><code>Remove</code>: Removes availability (e.g., for holidays or exceptions).</li>
</ul>
</li>
<li><strong>add-type</strong> (for <code>Add</code> action): Defines the scope of the addition.
<ul>
<li><code>WeeklyPeriod</code>: A recurring weekly pattern.</li>
<li><code>DailyPeriod</code>: A recurring daily pattern.</li>
<li><code>MonthlyPeriod</code>: A recurring monthly pattern.</li>
<li><code>YearlyPeriod</code>: A recurring yearly pattern.</li>
<li><code>Blocks</code>: A collection of specific time blocks.</li>
<li><code>Block</code>: A single specific time block.</li>
</ul>
</li>
<li><strong>remove-type</strong> (for <code>Remove</code> action): Defines the scope of removal.
<ul>
<li><code>Holidays</code>: Removes time based on public holidays for a specific region.</li>
</ul>
</li>
<li><strong>start</strong>: The start date/time of the availability period (ISO 8601 format).</li>
<li><strong>end</strong>: The end date/time of the availability period (ISO 8601 format).</li>
<li><strong>country</strong> (for <code>Holidays</code>): The country code (e.g., "ir", "au-qld") to fetch public holidays for.</li>
</ul>
<h3 id="time-cells"><a class="header" href="#time-cells">Time Cells</a></h3>
<p>Time cells are nested units that define the granularity of the schedule.</p>
<ul>
<li><strong>action</strong>: <code>Add</code> or <code>Remove</code>.</li>
<li><strong>add-type</strong>: The type of time cell (e.g., <code>DailyPeriod</code>, <code>Block</code>).</li>
<li><strong>start</strong>: Start constraint for the cell (e.g., <code>08:00</code>, <code>Monday</code>).</li>
<li><strong>end</strong>: End constraint for the cell.</li>
<li><strong>status</strong>: The availability status for this slot.
<ul>
<li><code>Available</code>: The time is free to be booked.</li>
<li><code>Unavailable</code>: The time cannot be booked.</li>
<li><code>Preferred</code>: The time is preferred for booking.</li>
<li><code>Undesired</code>: The time is not preferred but can be used if necessary.</li>
</ul>
</li>
<li><strong>rules</strong>: A list of specific constraints or behaviors (optional).</li>
</ul>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="brisbane-middle-school-schedule"><a class="header" href="#brisbane-middle-school-schedule">Brisbane Middle School Schedule</a></h3>
<p>This example demonstrates a school schedule for a middle school in Brisbane, Australia.</p>
<ul>
<li><strong>Days</strong>: Monday to Friday.</li>
<li><strong>Hours</strong>: 08:30 to 15:10.</li>
<li><strong>Structure</strong>: 6 periods with 2 breaks (Morning Tea and Lunch).</li>
<li><strong>Term</strong>: Term 1 (Jan 28) to Term 4 (Dec 12) for 2025.</li>
<li><strong>Holidays</strong>: Queensland public holidays are excluded.</li>
</ul>
<pre><code class="language-yaml">availabilities:
  # Define the main school term schedule for 2025
  - action: Add
    add-type: WeeklyPeriod
    first-day-of-week: Monday
    start: 2025-01-28T00:00:00+10:00 # Start of Term 1
    end: 2025-12-12T23:59:59+10:00   # End of Term 4
    time-cells:
      - action: Add
        add-type: DailyPeriod
        start: Monday
        end: Friday
        time-cells:
          # Period 1: 08:30 - 09:20
          - action: Add
            add-type: Block
            start: 08:30
            end: 09:20
            status: Available
            rules: []

          # Period 2: 09:20 - 10:10
          - action: Add
            add-type: Block
            start: 09:20
            end: 10:10
            status: Available
            rules: []

          # Break 1 (Morning Tea): 10:10 - 10:40 (Excluded)

          # Period 3: 10:40 - 11:30
          - action: Add
            add-type: Block
            start: 10:40
            end: 11:30
            status: Available
            rules: []

          # Period 4: 11:30 - 12:20
          - action: Add
            add-type: Block
            start: 11:30
            end: 12:20
            status: Available
            rules: []

          # Consolidation: 12:20 - 13:00
          - action: Add
            add-type: Block
            start: 12:20
            end: 13:00
            status: Available
            rules: []

          # Break 2 (Lunch): 13:00 - 13:30 (Excluded)

          # Period 5: 13:30 - 14:20
          - action: Add
            add-type: Block
            start: 13:30
            end: 14:20
            status: Available
            rules: []

          # Period 6: 14:20 - 15:10
          - action: Add
            add-type: Block
            start: 14:20
            end: 15:10
            status: Available
            rules: []

  # Remove Queensland Public Holidays
  - action: Remove
    remove-type: Holidays
    country: "au-qld"
    start: 2025-01-28T00:00:00+10:00
    end: 2025-12-12T23:59:59+10:00
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="facilities"><a class="header" href="#facilities">Facilities</a></h1>
<p>Facilities represent physical spaces such as classrooms, labs, gyms, or conference halls that can be scheduled for use.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="learners"><a class="header" href="#learners">Learners</a></h1>
<p>Learners are individuals who enroll in courses to receive training or education.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="instructors"><a class="header" href="#instructors">Instructors</a></h1>
<p>Instructors are individuals responsible for teaching and guiding learners in one or more courses.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="supervisors"><a class="header" href="#supervisors">Supervisors</a></h1>
<p>Individuals assigned to supervise or manage the facility.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="resources"><a class="header" href="#resources">Resources</a></h1>
<p>Resources are educational materials such as books, videos, or documents linked to subjects.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="subjects"><a class="header" href="#subjects">Subjects</a></h1>
<p>Subjects define standard educational topics such as “Physics 2” that can be taught across multiple courses.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="courses"><a class="header" href="#courses">Courses</a></h1>
<p>Courses are scheduled offerings of a subject, typically linked to a specific instructor and academy.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="units"><a class="header" href="#units">Units</a></h1>
<p>Organizational units such as schools, departments, or training centers, each with their own scheduling and resources.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-anonymization-for-solvers"><a class="header" href="#data-anonymization-for-solvers">Data Anonymization for Solvers</a></h1>
<h2 id="status"><a class="header" href="#status">Status</a></h2>
<p>Proposed</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>Some institutions (e.g. universities, academies) are unwilling or unable to expose real operational data
(instructors, learners, facilities, locations, internal constraints) to external solver services.</p>
<p>However, DiTA fundamentally relies on third-party or distributed solvers to process scheduling problems.
This creates a direct tension between:</p>
<ul>
<li>data privacy and confidentiality, and</li>
<li>solver effectiveness and correctness.</li>
</ul>
<p>This feature introduces a <strong>Data Anonymization System</strong> that enables solver participation
without exposing real or sensitive institutional data, while preserving correctness guarantees
or explicitly declaring deviations.</p>
<hr />
<h2 id="problem-statement"><a class="header" href="#problem-statement">Problem Statement</a></h2>
<p>We need a mechanism that:</p>
<ul>
<li>prevents solvers from accessing real institutional data,</li>
<li>allows solvers to operate on anonymized or transformed packets,</li>
<li>guarantees that the produced solution is either:
<ul>
<li>equivalent to the solution generated on real data, or</li>
<li>explicitly marked as potentially divergent with clear reasons.</li>
</ul>
</li>
</ul>
<p>This mechanism must be flexible, pluggable, and institution-controlled.</p>
<hr />
<h2 id="core-requirements"><a class="header" href="#core-requirements">Core Requirements</a></h2>
<h3 id="r1-packet-transformation"><a class="header" href="#r1-packet-transformation">R1. Packet Transformation</a></h3>
<p>The system MUST be able to:</p>
<ul>
<li>modify packet data,</li>
<li>and, when required, modify the <strong>structure of the packet</strong> itself,
to ensure that real data cannot be inferred or reconstructed.</li>
</ul>
<p>This includes:</p>
<ul>
<li>replacing identifiers,</li>
<li>abstracting entities,</li>
<li>removing or generalizing sensitive attributes,</li>
<li>restructuring references to external resources.</li>
</ul>
<hr />
<h3 id="r2-result-equivalence-guarantee"><a class="header" href="#r2-result-equivalence-guarantee">R2. Result Equivalence Guarantee</a></h3>
<p>For any anonymized packet:</p>
<ul>
<li>The solution produced by processing anonymized data MUST be:
<ul>
<li>equivalent to the solution that would have been produced using real data, <strong>or</strong></li>
<li>accompanied by an explicit declaration of discrepancies and their causes.</li>
</ul>
</li>
</ul>
<p>The anonymization layer MUST therefore:</p>
<ul>
<li>understand the semantic impact of transformations, or</li>
<li>expose uncertainty clearly and transparently.</li>
</ul>
<hr />
<h3 id="r3-resource-access-interception"><a class="header" href="#r3-resource-access-interception">R3. Resource Access Interception</a></h3>
<p>The anonymization system MAY alter resource references inside the packet.</p>
<h4 id="problem-example"><a class="header" href="#problem-example">Problem Example</a></h4>
<p>A packet may contain a statement such as:</p>
<blockquote>
<p>“Use instructors of my university”</p>
</blockquote>
<p>If passed directly:</p>
<ul>
<li>the solver may request the real university resource,</li>
<li>leading to leakage of sensitive data.</li>
</ul>
<h4 id="required-behavior"><a class="header" href="#required-behavior">Required Behavior</a></h4>
<p>The anonymization system MUST handle this by one of the following strategies:</p>
<ol>
<li>
<p><strong>Pre-fetch and Embed</strong></p>
<ul>
<li>Fetch real data from the institution resource.</li>
<li>Anonymize it.</li>
<li>Embed the anonymized dataset directly inside the packet.</li>
</ul>
</li>
<li>
<p><strong>Proxy Resource Redirection</strong></p>
<ul>
<li>Replace the original resource address in the packet.</li>
<li>Redirect it to an anonymization-compliant worker or proxy.</li>
<li>This worker:
<ul>
<li>fetches real data,</li>
<li>anonymizes it according to defined rules,</li>
<li>serves anonymized responses to the solver.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>In both cases:</p>
<ul>
<li>the solver MUST never access real institutional endpoints directly.</li>
</ul>
<hr />
<h3 id="r4-pluggable-anonymization-systems"><a class="header" href="#r4-pluggable-anonymization-systems">R4. Pluggable Anonymization Systems</a></h3>
<p>DiTA MUST support multiple anonymization systems.</p>
<p>Each anonymization system:</p>
<ul>
<li>may define its own rules,</li>
<li>may implement different transformation strategies,</li>
<li>may offer different trade-offs between privacy and solver effectiveness.</li>
</ul>
<p>The <strong>choice of anonymization system</strong> is the responsibility of the institution (customer),
not the platform.</p>
<hr />
<h3 id="r5-hard-to-anonymize-data-handling"><a class="header" href="#r5-hard-to-anonymize-data-handling">R5. Hard-to-Anonymize Data Handling</a></h3>
<p>Some data types may be:</p>
<ul>
<li>extremely difficult to anonymize,</li>
<li>or fundamentally non-anonymizable without breaking correctness.</li>
</ul>
<p>A primary example is <strong>location data</strong>.</p>
<h4 id="required-capability"><a class="header" href="#required-capability">Required Capability</a></h4>
<p>The anonymization system MAY provide alternative computational strategies, such as:</p>
<ul>
<li>embedding a distance-calculation worker inside the packet,</li>
<li>exposing derived metrics (e.g. travel time, distance matrix) instead of raw coordinates,</li>
<li>or introducing innovative abstractions that preserve solver utility.</li>
</ul>
<p>If no safe strategy exists:</p>
<ul>
<li>the anonymization system MUST declare limitations explicitly.</li>
</ul>
<hr />
<h2 id="non-goals"><a class="header" href="#non-goals">Non-Goals</a></h2>
<ul>
<li>This document does NOT define a specific anonymization algorithm.</li>
<li>This document does NOT mandate cryptographic techniques.</li>
<li>This document does NOT define implementation details or deployment topology.</li>
</ul>
<p>These concerns belong to architecture-level decisions (ADR).</p>
<hr />
<h2 id="open-questions"><a class="header" href="#open-questions">Open Questions</a></h2>
<ul>
<li>Where should anonymization be applied: pre-packet, gateway-level, or per-resource?</li>
<li>How should equivalence or divergence be formally defined and verified?</li>
<li>What guarantees can realistically be enforced across heterogeneous solvers?</li>
<li>How should anonymization metadata be exposed to solvers, if at all?</li>
</ul>
<hr />
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li>Evaluate architectural approaches for anonymization placement.</li>
<li>Define trust boundaries between platform, anonymizer, and solver.</li>
<li>Create ADR(s) to formalize architectural decisions derived from this design.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="architecture"><a class="header" href="#architecture"><strong>Architecture</strong></a></h1>
<p>The DiTA platform is built as a set of <strong>Kubernetes-native microservices</strong>. It enforces a clear separation between data management (Resources), logic (Processors), and platform utilities.</p>
<p><strong>Deployment Flexibility:</strong></p>
<ul>
<li><strong>Full Self-Hosting:</strong> The entire platform can be deployed on-premise for complete control.</li>
<li><strong>Hybrid:</strong> Use the public cloud for some services (e.g., the marketplace) while keeping sensitive Resource Services self-hosted.</li>
<li><strong>Service-Level:</strong> Individual services can be swapped or hosted independently.</li>
</ul>
<p><strong>Key Tech Stack:</strong></p>
<ul>
<li><strong>Communication:</strong> Kafka (Event Bus), gRPC/REST.</li>
<li><strong>State:</strong> PostgreSQL (Relational), Elasticsearch (Search/Index), Redis (Cache/Ephemeral).</li>
<li><strong>Identity:</strong> Keycloak.</li>
</ul>
<p><img src="architecture/../images/architecture.png" alt="DiTA Architecture diagram" /></p>
<hr />
<h2 id="service-groups"><a class="header" href="#service-groups">Service Groups</a></h2>
<h3 id="1-resource-services-the-truth"><a class="header" href="#1-resource-services-the-truth">1. Resource Services (The "Truth")</a></h3>
<p>These services manage the canonical domain data. They are the source of truth for the system.</p>
<ul>
<li><strong><code>packet-manager</code></strong>: Manages submission packets and their lifecycle. Uses <strong>Elasticsearch</strong> for high-performance search.</li>
<li><strong><code>people</code></strong>: Manages profiles (instructors, students) and availability.</li>
<li><strong><code>organization</code></strong>: Manages school/university metadata.</li>
<li><strong><code>resources</code></strong>: Manages physical assets (rooms, equipment).</li>
<li><strong><code>subjects</code></strong>: Manages curriculum and subject definitions.</li>
</ul>
<h3 id="2-processor-services-the-workers"><a class="header" href="#2-processor-services-the-workers">2. Processor Services (The "Workers")</a></h3>
<p>These services consume events and perform heavy lifting.</p>
<ul>
<li><strong><code>basic-scheduler</code></strong>: An automated solver that generates timetables. Uses <strong>Redis</strong> for job queues.</li>
<li><strong><code>manual-scheduler</code></strong>: Supports human-in-the-loop editing.</li>
<li><strong><code>packet-analyzer</code></strong>: Extracts features (complexity, constraints) from packets to guide solvers.</li>
<li><strong><code>timetable-ranker</code></strong>: Stream processor that scores incoming solutions.</li>
</ul>
<h3 id="3-platform--infrastructure"><a class="header" href="#3-platform--infrastructure">3. Platform &amp; Infrastructure</a></h3>
<ul>
<li><strong><code>wallet</code></strong>: Manages credits and transactions (Cloud-exclusive).</li>
<li><strong><code>notification</code></strong>: Handles alerts and messages.</li>
<li><strong><code>kafka</code></strong>: The central nervous system. All services publish/subscribe to domain events here.</li>
<li><strong><code>ingress</code></strong>: Handles routing and load balancing.</li>
</ul>
<hr />
<h2 id="technical-interaction-flow"><a class="header" href="#technical-interaction-flow">Technical Interaction Flow</a></h2>
<p>The system relies on an <strong>Event-Driven Architecture</strong>:</p>
<ol>
<li><strong>Ingestion:</strong> API calls to Resource Services emit events (e.g., <code>packet.created</code>) to Kafka.</li>
<li><strong>Processing:</strong> Processor Services (like <code>basic-scheduler</code>) subscribe to these topics.</li>
<li><strong>Result Publication:</strong> Processors publish results (e.g., <code>candidate.created</code>) back to Kafka.</li>
<li><strong>Aggregation:</strong> Analytics services (<code>timetable-ranker</code>) consume result streams to update scores in real-time.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="architecture-decision-records-adr"><a class="header" href="#architecture-decision-records-adr">Architecture Decision Records (ADR)</a></h1>
<p>This section contains documentation regarding significant architectural decisions for the project.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="000001-select-rust-as-the-primary-language-for-microservices"><a class="header" href="#000001-select-rust-as-the-primary-language-for-microservices">000001. Select Rust as the Primary Language for Microservices</a></h1>
<p>Date: 2025-12-19</p>
<h2 id="status-1"><a class="header" href="#status-1">Status</a></h2>
<p>Accepted (with explicit constraints and exit criteria)</p>
<h2 id="context"><a class="header" href="#context">Context</a></h2>
<p>DiTA is a distributed, computation-heavy platform whose core value is derived from solver quality, scalability, and cost-efficient execution of scheduling workloads. The system consists of multiple microservices with different characteristics, including:</p>
<ul>
<li>CPU-bound solver services with high parallelism</li>
<li>Coordination- and orchestration-heavy services</li>
<li>I/O-bound control-plane services</li>
</ul>
<p>Choosing a primary implementation language is a <strong>long-term architectural commitment</strong> that directly impacts:</p>
<ul>
<li>Infrastructure cost</li>
<li>Development velocity</li>
<li>System reliability</li>
<li>Hiring and onboarding</li>
<li>Ability to revise architectural decisions over time</li>
</ul>
<p>This decision must therefore be justified as a <strong>cost–benefit trade-off</strong>, not as a purely technical or ideological preference.</p>
<h2 id="decision"><a class="header" href="#decision">Decision</a></h2>
<p>Rust is selected as the <strong>primary (default) language</strong> for DiTA microservices <strong>under clearly defined constraints</strong>, with explicit recognition of its costs, risks, and limits.</p>
<p>Rust is mandatory for:</p>
<ul>
<li>Compute-bound services (e.g. solvers, evaluators, optimizers)</li>
<li>Latency-sensitive or high-throughput services</li>
<li>Services where memory safety, determinism, and predictable performance materially affect infrastructure cost or correctness</li>
</ul>
<p>Rust is <strong>not mandatory</strong> for:</p>
<ul>
<li>Research, experimentation, or rapid prototyping services</li>
<li>ML-heavy or numerics-heavy components where ecosystem maturity is critical</li>
<li>Glue or orchestration services where development speed outweighs runtime efficiency</li>
</ul>
<p>Non-Rust services must be isolated behind well-defined network boundaries (HTTP/gRPC) and treated as replaceable components.</p>
<h2 id="rationale"><a class="header" href="#rationale">Rationale</a></h2>
<h3 id="why-rust"><a class="header" href="#why-rust">Why Rust</a></h3>
<p>Rust provides the following <strong>economic and architectural advantages</strong> for DiTA’s core workloads:</p>
<ul>
<li>Strong memory safety guarantees without garbage collection, reducing production risk in long-running services</li>
<li>Predictable performance characteristics suitable for CPU-intensive solvers</li>
<li>Low runtime overhead, enabling higher density per node and lower infrastructure cost</li>
<li>Explicit ownership and concurrency models that align well with distributed, parallel computation</li>
</ul>
<p>These benefits directly support DiTA’s long-term goals of scalability, cost efficiency, and correctness in solver execution.</p>
<h3 id="recognized-costs-and-risks"><a class="header" href="#recognized-costs-and-risks">Recognized Costs and Risks</a></h3>
<p>This decision explicitly acknowledges the <strong>non-trivial costs</strong> of adopting Rust:</p>
<ul>
<li>Higher onboarding and learning curve compared to mainstream backend languages</li>
<li>Slower iteration speed for early-stage product exploration</li>
<li>Increased risk of early abstraction lock-in due to strong type constraints</li>
<li>Smaller ecosystem for advanced numerical computing and ML compared to Python/C++</li>
</ul>
<p>Rust can <strong>amplify good design but also harden bad design early</strong>. This risk is accepted and mitigated through scope control and architectural discipline rather than ignored.</p>
<h2 id="alternatives-considered"><a class="header" href="#alternatives-considered">Alternatives Considered</a></h2>
<h3 id="go"><a class="header" href="#go">Go</a></h3>
<ul>
<li>Pros: Fast onboarding, strong ecosystem for distributed systems, low operational friction</li>
<li>Cons: Garbage collection overhead, weaker guarantees for memory and concurrency safety</li>
<li>Rejected as default due to poorer suitability for compute-heavy solver workloads</li>
</ul>
<h3 id="python"><a class="header" href="#python">Python</a></h3>
<ul>
<li>Pros: Excellent ecosystem for ML and optimization, very fast prototyping</li>
<li>Cons: Poor runtime performance, higher operational cost at scale</li>
<li>Accepted as a <strong>secondary language</strong> for research and experimentation only</li>
</ul>
<h3 id="c"><a class="header" href="#c">C++</a></h3>
<ul>
<li>Pros: Maximum performance and mature numerical libraries</li>
<li>Cons: High maintenance cost, memory safety risks, slower team scalability</li>
<li>Rejected due to long-term reliability and operational risk</li>
</ul>
<h2 id="scope-control-and-boundaries"><a class="header" href="#scope-control-and-boundaries">Scope Control and Boundaries</a></h2>
<p>To prevent overreach, the following constraints apply:</p>
<ul>
<li>Rust adoption starts with solver and performance-critical services only</li>
<li>Control-plane and orchestration services may use alternative languages if justified</li>
<li>All inter-service communication must occur via explicit network protocols</li>
<li>No cross-language in-process coupling is allowed</li>
</ul>
<h2 id="exit-criteria-and-re-evaluation"><a class="header" href="#exit-criteria-and-re-evaluation">Exit Criteria and Re-evaluation</a></h2>
<p>This decision is <strong>not irreversible</strong>.</p>
<p>The choice of Rust will be re-evaluated if one or more of the following occur:</p>
<ul>
<li>Development velocity becomes a bottleneck to product–market fit</li>
<li>Hiring or onboarding costs exceed acceptable thresholds</li>
<li>A significant portion of services are I/O-bound with no measurable performance benefit from Rust</li>
<li>Operational complexity outweighs infrastructure savings</li>
</ul>
<p>A formal review must be conducted before expanding Rust to additional service categories.</p>
<h2 id="consequences"><a class="header" href="#consequences">Consequences</a></h2>
<h3 id="positive"><a class="header" href="#positive">Positive</a></h3>
<ul>
<li>Lower runtime risk and improved reliability for core solver services</li>
<li>Reduced infrastructure cost for CPU-bound workloads</li>
<li>Strong alignment between language semantics and parallel computation needs</li>
</ul>
<h3 id="negative"><a class="header" href="#negative">Negative</a></h3>
<ul>
<li>Higher upfront development and onboarding cost</li>
<li>Increased architectural rigidity if boundaries are poorly designed</li>
<li>Need for disciplined scope control to avoid premature over-engineering</li>
</ul>
<hr />
<p>This ADR represents a <strong>constrained, economically motivated decision</strong>, not a universal endorsement of Rust.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development"><a class="header" href="#development">Development</a></h1>
<p>This section contains technical decisions and service implementations.</p>
<p>The technical development guide is available at: <a href="http://eg.dita.hasankarimi.ir">eg.dita.hasankarimi.ir</a></p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h2 id="license"><a class="header" href="#license"><strong>License</strong></a></h2>
<p>The Distributed Timetable Assistant (DiTA) project, including its source code, design, documentation, and conceptual framework, is the exclusive intellectual property of its owner.</p>
<p>No part of this project — including but not limited to the ideas, algorithms, architectural design, or implementation details — may be copied, reproduced, modified, distributed, or utilized in any form, whether commercial or non-commercial, without explicit prior written permission from the owner.</p>
<p>Unauthorized use, replication, or distribution of any component of this project constitutes a violation of intellectual property rights and may lead to legal action.</p>
<p>© 2025 DiTA Project. All Rights Reserved.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="lang-switch.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
