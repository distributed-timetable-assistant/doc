<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>DiTA — Distributed Timetable Assistant</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">DiTA — Distributed Timetable Assistant</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction"><strong>Introduction</strong></a></h1>
<p>The <strong>Distributed Timetable Assistant (DiTA)</strong> is a decentralized platform designed to revolutionize educational scheduling. By moving away from traditional, centralized algorithms, DiTA empowers institutions, instructors, and learners to collaboratively build optimized timetables.</p>
<p>Instead of a single bottleneck, DiTA uses a network of independent <strong>Solver Services</strong> that compete to solve scheduling problems defined by <strong>Institution Packets</strong>. This approach ensures scalability, fairness, and the ability to handle complex, real-world constraints that centralized systems often miss.</p>
<p>For a deeper dive into how DiTA works, see the <a href="overview.html">Overview</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overview"><a class="header" href="#overview"><strong>Overview</strong></a></h1>
<h2 id="the-challenge"><a class="header" href="#the-challenge">The Challenge</a></h2>
<p>Educational scheduling is inherently complex. It involves balancing the needs of multiple stakeholders—institutions, instructors, supervisors, and learners—against limited resources like classrooms and labs. Traditional centralized systems often struggle with this complexity, leading to rigid schedules that fail to accommodate individual preferences or adapt to changes.</p>
<h2 id="the-dita-solution"><a class="header" href="#the-dita-solution">The DiTA Solution</a></h2>
<p>The <strong>Distributed Timetable Assistant (DiTA)</strong> addresses these challenges through decentralization. It creates a marketplace where scheduling problems are matched with independent solvers.</p>
<h3 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h3>
<ul>
<li><strong>Institution Packets:</strong> Structured data units where organizations define their participants, courses, constraints, and resources.</li>
<li><strong>Solver Services:</strong> Independent microservices (human or automated) that propose timetable solutions.</li>
<li><strong>Marketplace:</strong> The ecosystem where packets are published and solutions are traded.</li>
</ul>
<h3 id="unique-features"><a class="header" href="#unique-features">Unique Features</a></h3>
<h4 id="1-open-ecosystem"><a class="header" href="#1-open-ecosystem">1. Open Ecosystem</a></h4>
<p>DiTA is not just for schools. It is a platform where <strong>anyone</strong> can register and manage resources.</p>
<ul>
<li><strong>Participants:</strong> Teachers, students, supervisors.</li>
<li><strong>Facilities:</strong> Schools, universities, gyms, laboratories, and more.</li>
<li><strong>Sharing:</strong> Users can share their availability or resources (e.g., a lab renting out empty slots) with the entire network.</li>
</ul>
<h4 id="2-hybrid-resource-management"><a class="header" href="#2-hybrid-resource-management">2. Hybrid Resource Management</a></h4>
<p>Institutions can define resources in a flexible, hybrid manner:</p>
<ul>
<li><strong>Dedicated:</strong> Use your own private list of teachers and rooms.</li>
<li><strong>Shared:</strong> Request resources from the public pool.</li>
<li><strong>Conditional:</strong> Define rules like <em>"If our internal math teachers are fully booked, request a certified math teacher from the platform."</em>
This applies to all resource types—instructors, classrooms, or even specific equipment.</li>
</ul>
<h4 id="3-a-hub-for-academic-research"><a class="header" href="#3-a-hub-for-academic-research">3. A Hub for Academic Research</a></h4>
<p>Educational timetabling is a vibrant field of research, with dedicated conferences like <strong>PATAT</strong> (Practice and Theory of Automated Timetabling) and international competitions (ITC).
DiTA provides a perfect real-world testbed for researchers:</p>
<ul>
<li><strong>Real Data:</strong> Researchers can test their algorithms on real-world constraints and data (anonymized if needed).</li>
<li><strong>Benchmarking:</strong> The marketplace acts as a live benchmark where new algorithms can compete against existing ones.</li>
<li><strong>Implementation:</strong> Students and academics can publish their solvers as microservices, moving their work from theoretical papers to practical application.</li>
</ul>
<h2 id="how-it-works-the-user-journey"><a class="header" href="#how-it-works-the-user-journey">How It Works (The User Journey)</a></h2>
<ol>
<li><strong>Definition:</strong> An institution defines its requirements (courses, teachers, rooms) and bundles them into an <strong>Institution Packet</strong>.</li>
<li><strong>Submission:</strong> The packet is submitted to the DiTA network.</li>
<li><strong>Discovery:</strong> Independent <strong>Solver Services</strong> discover the packet and analyze its complexity.</li>
<li><strong>Solving:</strong> Solvers generate proposed timetables, optimizing for constraints and preferences.</li>
<li><strong>Evaluation:</strong> The system scores proposals based on quality, fairness, and rule satisfaction.</li>
<li><strong>Selection:</strong> The institution selects the best solution, and the winning solver is rewarded.</li>
</ol>
<p>This process allows for iterative improvement, where schedules can be refined over time to achieve the best possible outcome for everyone involved.</p>
<p><img src="images/overview-flowchart.png" alt="Overview Flowchart" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design"><a class="header" href="#design"><strong>Design</strong></a></h1>
<p>The <strong>Distributed Timetable Assistant (DiTA)</strong> design focuses on extensibility, fairness, and reactive evaluation. It provides the abstract mechanisms that enable the marketplace described in the <a href="design/../overview.html">Overview</a>.</p>
<p><img src="design/../images/design.png" alt="Distributed Timetable Assistant Design" /></p>
<hr />
<h2 id="core-mechanisms"><a class="header" href="#core-mechanisms">Core Mechanisms</a></h2>
<h3 id="1-the-marketplace"><a class="header" href="#1-the-marketplace">1. The Marketplace</a></h3>
<p>The marketplace is the decoupling layer between Institutions (demand) and Solvers (supply). It ensures that:</p>
<ul>
<li><strong>Discovery:</strong> Solvers can find problems that match their capabilities.</li>
<li><strong>Transparency:</strong> All transactions and evaluations are verifiable.</li>
<li><strong>Competition:</strong> Multiple solvers can attempt the same problem, driving up solution quality.</li>
</ul>
<h3 id="2-reactive-evaluation--scoring"><a class="header" href="#2-reactive-evaluation--scoring">2. Reactive Evaluation &amp; Scoring</a></h3>
<p>DiTA employs a <strong>reactive</strong> scoring model. Solution scores are not static; they adjust based on the changing state of resources.</p>
<ul>
<li><strong>Dynamic Scoring:</strong> If a resource (e.g., a specific lab) becomes overbooked globally, solutions relying on it may see their scores drop in real-time.</li>
<li><strong>Fairness:</strong> The system penalizes conflicts and rewards efficient resource usage proportionally.</li>
</ul>
<h3 id="3-extensibility"><a class="header" href="#3-extensibility">3. Extensibility</a></h3>
<p>The platform is designed to evolve without breaking existing contracts:</p>
<ul>
<li><strong>Reward Models:</strong> New ways to incentivize solvers (e.g., tokens, reputation) can be plugged in.</li>
<li><strong>Gamification:</strong> Leaderboards and challenges can be added to the solver layer.</li>
<li><strong>Pluggable Validators:</strong> Institutions can add custom validation logic for their specific constraints.</li>
</ul>
<h3 id="4-flexible-processing--privacy"><a class="header" href="#4-flexible-processing--privacy">4. Flexible Processing &amp; Privacy</a></h3>
<p>The system supports various processing models to suit different privacy and security needs:</p>
<ul>
<li><strong>Self-Hosted Processing:</strong> Institutions can run their own solver services to keep data entirely within their infrastructure.</li>
<li><strong>Conditional Processing:</strong> Requests can be routed to specific solvers that meet certain criteria (e.g., "only trusted partners").</li>
<li><strong>Anonymized Processing:</strong> Data can be passed through an anonymization layer before reaching public solvers. The results are transparently de-anonymized upon return, allowing the community to solve the problem without seeing sensitive identity data.</li>
</ul>
<hr />
<h2 id="design-principles"><a class="header" href="#design-principles">Design Principles</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Principle</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>Decentralization</strong></td><td>Logic is distributed; no single central scheduler controls the outcome.</td></tr>
<tr><td><strong>Transparency</strong></td><td>Evaluation rules and rewards are clear to all participants.</td></tr>
<tr><td><strong>Reactivity</strong></td><td>The system adapts to state changes in real-time.</td></tr>
<tr><td><strong>Scalability</strong></td><td>Adding more solvers linearly increases the system's problem-solving capacity.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="architecture"><a class="header" href="#architecture"><strong>Architecture</strong></a></h1>
<p>The DiTA platform is built as a set of <strong>Kubernetes-native microservices</strong>. It enforces a clear separation between data management (Resources), logic (Processors), and platform utilities.</p>
<p><strong>Deployment Flexibility:</strong></p>
<ul>
<li><strong>Full Self-Hosting:</strong> The entire platform can be deployed on-premise for complete control.</li>
<li><strong>Hybrid:</strong> Use the public cloud for some services (e.g., the marketplace) while keeping sensitive Resource Services self-hosted.</li>
<li><strong>Service-Level:</strong> Individual services can be swapped or hosted independently.</li>
</ul>
<p><strong>Key Tech Stack:</strong></p>
<ul>
<li><strong>Communication:</strong> Kafka (Event Bus), gRPC/REST.</li>
<li><strong>State:</strong> PostgreSQL (Relational), Elasticsearch (Search/Index), Redis (Cache/Ephemeral).</li>
<li><strong>Identity:</strong> Keycloak.</li>
</ul>
<p><img src="architecture/../images/architecture.png" alt="DiTA Architecture diagram" /></p>
<hr />
<h2 id="service-groups"><a class="header" href="#service-groups">Service Groups</a></h2>
<h3 id="1-resource-services-the-truth"><a class="header" href="#1-resource-services-the-truth">1. Resource Services (The "Truth")</a></h3>
<p>These services manage the canonical domain data. They are the source of truth for the system.</p>
<ul>
<li><strong><code>packet-manager</code></strong>: Manages submission packets and their lifecycle. Uses <strong>Elasticsearch</strong> for high-performance search.</li>
<li><strong><code>people</code></strong>: Manages profiles (instructors, students) and availability.</li>
<li><strong><code>organization</code></strong>: Manages school/university metadata.</li>
<li><strong><code>resources</code></strong>: Manages physical assets (rooms, equipment).</li>
<li><strong><code>subjects</code></strong>: Manages curriculum and subject definitions.</li>
</ul>
<h3 id="2-processor-services-the-workers"><a class="header" href="#2-processor-services-the-workers">2. Processor Services (The "Workers")</a></h3>
<p>These services consume events and perform heavy lifting.</p>
<ul>
<li><strong><code>basic-scheduler</code></strong>: An automated solver that generates timetables. Uses <strong>Redis</strong> for job queues.</li>
<li><strong><code>manual-scheduler</code></strong>: Supports human-in-the-loop editing.</li>
<li><strong><code>packet-analyzer</code></strong>: Extracts features (complexity, constraints) from packets to guide solvers.</li>
<li><strong><code>timetable-ranker</code></strong>: Stream processor that scores incoming solutions.</li>
</ul>
<h3 id="3-platform--infrastructure"><a class="header" href="#3-platform--infrastructure">3. Platform &amp; Infrastructure</a></h3>
<ul>
<li><strong><code>wallet</code></strong>: Manages credits and transactions (Cloud-exclusive).</li>
<li><strong><code>notification</code></strong>: Handles alerts and messages.</li>
<li><strong><code>kafka</code></strong>: The central nervous system. All services publish/subscribe to domain events here.</li>
<li><strong><code>ingress</code></strong>: Handles routing and load balancing.</li>
</ul>
<hr />
<h2 id="technical-interaction-flow"><a class="header" href="#technical-interaction-flow">Technical Interaction Flow</a></h2>
<p>The system relies on an <strong>Event-Driven Architecture</strong>:</p>
<ol>
<li><strong>Ingestion:</strong> API calls to Resource Services emit events (e.g., <code>packet.created</code>) to Kafka.</li>
<li><strong>Processing:</strong> Processor Services (like <code>basic-scheduler</code>) subscribe to these topics.</li>
<li><strong>Result Publication:</strong> Processors publish results (e.g., <code>candidate.created</code>) back to Kafka.</li>
<li><strong>Aggregation:</strong> Analytics services (<code>timetable-ranker</code>) consume result streams to update scores in real-time.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development"><a class="header" href="#development">Development</a></h1>
<p>This section contains technical decisions and service implementations.</p>
<p>The technical development guide is available at: <a href="http://eg.dita.hasankarimi.ir">eg.dita.hasankarimi.ir</a></p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h2 id="license"><a class="header" href="#license"><strong>License</strong></a></h2>
<p>The Distributed Timetable Assistant (DiTA) project, including its source code, design, documentation, and conceptual framework, is the exclusive intellectual property of its owner.</p>
<p>No part of this project — including but not limited to the ideas, algorithms, architectural design, or implementation details — may be copied, reproduced, modified, distributed, or utilized in any form, whether commercial or non-commercial, without explicit prior written permission from the owner.</p>
<p>Unauthorized use, replication, or distribution of any component of this project constitutes a violation of intellectual property rights and may lead to legal action.</p>
<p>© 2025 DiTA Project. All Rights Reserved.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
